<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tumo.model.dao.SNSDao">
	<insert id="registScrap" parameterType="map">
		insert into scrap (user_idx, board_idx, create_at)
		value (#{userIdx}, #{boardIdx}, now())
	</insert>

	<select id="showScrapList" parameterType="int"
		resultType="scrapDto">
		select s.board_idx as boardIdx, f.title as title, u.nickname as nickname, u.user_idx as userIdx
		from scrap s join feed f
		on s.board_idx = f.board_idx
		join user u
		on s.user_idx = u.user_idx
		where s.user_idx = #{userIdx}
		order by s.create_at desc;
	</select>

	<delete id="deleteScrap" parameterType="map">
		delete from scrap
		where user_idx = #{userIdx} and board_idx = #{boardIdx}
	</delete>
</mapper>