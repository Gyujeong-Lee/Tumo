<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tumo.model.dao.FeedDao">
	<select id="searchFeedByTitle" parameterType="String" resultType="feedDto">
		select nickname, title, content, likes, createAt, updateAt
		from feed
		where (title like "%#{title}%")
		order by updateAt desc;
	</select>
	
	<select id="readFeed" parameterType="int" resultType="feedDto">
		select f.board_idx as boardIdx, f.user_idx as userIdx, u.nickname as nickname, f.title as title, f.content as content, f.create_at as createAt, f.update_at as updateAt, f.likes as likes, f.stock as stock
		from feed f join following l
		on f.user_idx = l.following_idx
		join user u
		on f.user_idx = u.user_idx
		where l.user_idx = #{userIdx}
		order by f.create_at desc
		limit #{pageNum}, 10
	</select>
</mapper>	